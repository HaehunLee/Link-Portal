<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="kr.co.link.dao.BlogNeighborDao">		<!-- Dao경로설정 -->
<select id="getNeighborByBlogNo" parameterType="map" resultType="blog">
		select
		a.BLOG_NO no,
		a.BLOG_TITLE title,
		a.BLOG_MAIN_IMG mainImg,
		a.BLOG_THEME theme,
		a.BLOG_VISITS visits,
		a.BLOG_DESCRIPTION description,
		a.BLOG_CREATE_DATE createDate,
		a.USER_ID userId,
		a.BLOG_BACKGROUND_COLOR backgroundColor,
		a.BLOG_FONT_COLOR fontColor,
		a.blog_opacity opacity,
		a.BLOG_ATAG_COLOR atagColor,
		a.BLOG_HR_COLOR hrColor,
		a.BLOG_BODY_COLOR bodyColor,
		a.BLOG_FIRSTCOL firstCol,
		a.BLOG_SECONDCOL secondCol,
		a.BLOG_THIRDCOL thirdCol,
		a.BLOG_LAYOUT layout,
		a.BLOG_PAGENUM_COLOR pageNumColor, 
		a.BLOG_PAGENUM_BACKGROUNDCOLOR pageNumBackgroundColor,
		a.BLOG_TOPIC topic,
		a.BLOG_PAGENUMBORDERCOLOR pageNumBorderColor
	from 
		blog a, blog_neighbor b
	where
		b.blog_no = #{blogNo}
	and
		a.blog_no = b.neighborhood_no
	and 
		b.neighborhood_type = #{type}
</select>
<select id="">
	select
	    BOARD_NO no,
	    BOARD_TITLE title,
	    BOARD_CONTENTS contents,
	    BOARD_CREATE_DATE createDate,
	    CATEGORY_NO categoryNo,
	    BOARD_MAIN_IMG mainImg
	from(
	    select ROW_NUMBER() OVER ( ORDER BY a.board_create_date desc) row_no,
	    a.BOARD_NO,
	    a.BOARD_TITLE,
	    a.BOARD_CONTENTS,
	    a.BOARD_CREATE_DATE,
	    a.CATEGORY_NO,
	    a.BOARD_MAIN_IMG
	        from blog_boards a, blog_category b, blog_subcategory c, blog d
	        where
	            a.category_no = b.category_no
	        and
	            b.subcategory_no = c.subcategory_no
	        and
	            c.blog_no = d.blog_no
	        and d.blog_no = #{value}
	)
	where row_no = 1
</select>

</mapper>