<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="kr.co.link.dao.BlogDao">		<!-- Dao경로설정 -->
<select id="getBlogByUserId" parameterType="string" resultType="blog">
	select
		BLOG_NO no,
		BLOG_TITLE title,
		BLOG_MAIN_IMG mainImg,
		BLOG_THEME theme,
		BLOG_VISITS visits,
		BLOG_DESCRIPTION description,
		BLOG_CREATE_DATE createDate,
		USER_ID userId
	from
		blog
	where
		user_id = #{value}
</select>
<select id="getBlogByBlogNo" parameterType="int" resultType="blog">
	select
		BLOG_NO no,
		BLOG_TITLE title,
		BLOG_MAIN_IMG mainImg,
		BLOG_THEME theme,
		BLOG_VISITS visits,
		BLOG_DESCRIPTION description,
		BLOG_CREATE_DATE createDate,
		USER_ID userId
	from
		blog
	where
		blog_no = #{value}
</select>

<select id="get3BlogByVisits" resultType="blog">
	select
		BLOG_NO no,
		BLOG_TITLE title,
		BLOG_MAIN_IMG mainImg,
		BLOG_THEME theme,
		BLOG_VISITS visits,
		BLOG_DESCRIPTION description,
		BLOG_CREATE_DATE createDate,
		USER_ID userId
	from(
        select
            row_number() over(Order by blog_visits desc) row_no,
            BLOG_NO,
            BLOG_TITLE,
            BLOG_MAIN_IMG,
            BLOG_THEME,
            BLOG_VISITS,
            BLOG_DESCRIPTION,
            BLOG_CREATE_DATE,
            USER_ID
        from
            blog
    )
    where row_no &lt;=3
</select>

</mapper>